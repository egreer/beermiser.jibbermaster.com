(this["webpackJsonpbeermiser.jibbermaster.com"]=this["webpackJsonpbeermiser.jibbermaster.com"]||[]).push([[0],{37:function(e,a,t){e.exports=t(68)},42:function(e,a,t){},45:function(e,a,t){},68:function(e,a,t){"use strict";t.r(a);var l=t(0),n=t.n(l),r=t(15),c=t.n(r),o=(t(42),t(16)),s=t(17),i=t(19),m=t(18),u=t(14),d=t(35),p=t(6),E=(t(45),t(70)),h=t(71),v=t(72),b=t(73),f=t(80),g=t(74),w=t(79),C=t(75),x=t(76),z=t(77),y=t(78),O=t(7),j=t(24),N=t.n(j),S=t(13),_=t.n(S),k={id:_()(),volume:"",volume_unit:"Oz",price:"",calculation:null,apv_calculation:null,ppv_calculation:null},B={id:_()(),name:"",alcohol:"",alcohol_unit:"APV",sizes:[Object(O.cloneDeep)(k)]},F={stored:[],brew:Object(O.cloneDeep)(B)},A=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(o.a)(this,t);for(var l=arguments.length,r=new Array(l),c=0;c<l;c++)r[c]=arguments[c];return(e=a.call.apply(a,[this].concat(r))).state=Object(O.cloneDeep)(F),e.componentDidMount=function(){var a=N.a.get("beermiser-state")||Object(O.cloneDeep)(F);e.setState(a)},e.persistState=function(a,t){e.setState(a,(function(){N.a.set("beermiser-state",e.state),Object(O.isFunction)(t)&&t()}))},e.handleChange=function(a){var t=e.state.brew;e.persistState({brew:Object(O.set)(t,a.target.name,a.target.value)},e.updateCalculation)},e.handleVolumeChange=function(a,t){console.log(a,t);var l=e.state.brew;e.state.brew.sizes.map((function(e){return e.id===t&&Object(O.set)(e,a.target.name,a.target.value),e})),e.persistState(l,e.updateCalculation)},e.saveCurrent=function(){console.log("Save Current",e.state);var a=e.state,t=a.brew,l=a.stored;t.id=_()(),t.sizes.forEach((function(a){a.id=_()(),l.push(e.buildBrewSize(t,a))})),e.persistState(Object(O.assign)(Object(O.cloneDeep)(F),{stored:Object(O.orderBy)(l,["calculation","apv_calculation","ppv_calculation"],["asc","desc","asc"])}))},e.buildBrewSize=function(e,a){console.log("brew",e),console.log("size",a);var t=Object(O.assign)({},e,a);return console.log("brewSize",t),delete t.sizes,Object(O.assign)(t,{brewId:e.id,id:a.id}),t},e.updateCalculation=function(){e.persistState({brew:e.calculateCalculations(e.state.brew)})},e.calculateCalculations=function(e){var a=e.alcohol,t=e.alcohol_unit;return e.sizes.forEach((function(e){var l=e.volume,n=e.volume_unit,r=e.price,c=parseFloat(a),o=parseFloat(l),s=null,i=null,m=null;a&&"ABW"===t&&(c=1.25*parseFloat(a)),l&&"mL"===n?o=.03381*parseFloat(l):l&&"L"===n&&(o=1e3*parseFloat(l)*.03381),c&&c>0&&o&&o>0&&(s=c/100*o),o&&o>0&&r&&parseFloat(r)>0&&(i=parseFloat(r)/o),c&&c>0&&o&&o>0&&r&&parseFloat(r)>0&&(m=parseFloat(r)/(c/100*o)),Object(O.assign)(e,{calculation:m,apv_calculation:s,ppv_calculation:i})})),e},e.reCalculateAll=function(){var a=e.state.stored;a.forEach((function(a){Object(O.assign)(a,e.calculateCalculations(a))})),e.persistState({stored:Object(O.orderBy)(a,["calculation","apv_calculation","ppv_calculation"],["asc","desc","asc"])})},e.removeActiveBrewSize=function(a){var t=e.state.brew;Object(O.remove)(t.sizes,(function(e){return e.id===a})),e.persistState({brew:t})},e.removeBrewSize=function(a){var t=e.state.stored;Object(O.remove)(t,(function(e){return e.id===a})),e.persistState({stored:t})},e.removeBrew=function(a){var t=e.state.stored;Object(O.remove)(t,(function(e){return e.brewId===a})),e.persistState({stored:t})},e.editBrew=function(a){var t=e.rebuildBrew(a.brewId);e.persistState({brew:t}),e.removeBrew(t.id)},e.rebuildBrew=function(a){var t=e.state.stored.filter((function(e){return e.brewId===a})),l={id:a,name:t[0].name,alcohol:t[0].alcohol,alcohol_unit:t[0].alcohol_unit,sizes:t};return t.forEach((function(e){delete e.name,delete e.alcohol,delete e.alcohol_unit})),l},e.addSize=function(){var a=e.state.brew,t=Object(O.cloneDeep)(k);t.id=_()(),a.sizes.push(t),e.persistState({brew:a})},e.reset=function(){e.persistState(Object(O.cloneDeep)(F))},e.renderSizes=function(a){return null===a||void 0===a?void 0:a.map((function(t,l){return n.a.createElement(E.a,{row:!0,key:l},n.a.createElement(h.a,{xs:{size:6},className:"mb-3 mb-sm-0"},n.a.createElement(v.a,null,n.a.createElement(b.a,{type:"number",name:"volume",placeholder:"Volume",value:t.volume,onChange:function(a){return e.handleVolumeChange(a,t.id)},min:0}),n.a.createElement(f.a,{addonType:"append"},n.a.createElement(b.a,{type:"select",name:"volume_unit",value:t.volume_unit,className:"rounded-right",style:{borderRadius:0},onChange:function(a){return e.handleVolumeChange(a,t.id)}},n.a.createElement("option",null,"Oz"),n.a.createElement("option",null,"mL"),n.a.createElement("option",null,"L"))))),n.a.createElement(h.a,{xs:{size:4},className:"mb-3 mb-sm-0 pr-1"},n.a.createElement(v.a,null,n.a.createElement(b.a,{type:"number",name:"price",placeholder:"Price",value:t.price,onChange:function(a){return e.handleVolumeChange(a,t.id)},min:0,step:.01}),n.a.createElement(f.a,{addonType:"append"},"$"))),n.a.createElement(h.a,{xs:{size:2}},n.a.createElement(g.a,{color:"danger",block:!0,disabled:a.length<=1,onClick:function(){return e.removeActiveBrewSize(t.id)}},n.a.createElement("i",{className:"fa fa-trash"}))))}))},e.renderCalculations=function(a){return n.a.createElement(w.a,{color:"success",className:"calculations"},a.sizes.map((function(a,t){return e.renderCalculation(a,t)})))},e.renderCalculation=function(e,a){if(e){var t=e.calculation,l=e.apv_calculation,r=e.ppv_calculation,c=e.volume,o=e.volume_unit,s=n.a.createElement(h.a,{xs:6,sm:9,style:{opacity:.3}},n.a.createElement("h5",null,"Calculating...."));return(t||l||r)&&(s=n.a.createElement(n.a.Fragment,null,n.a.createElement(h.a,{xs:6,sm:3},t&&n.a.createElement("h5",null,t.toFixed(3),n.a.createElement("small",{className:"noselect px-1 text-nowrap"},n.a.createElement("sup",null,"$"),"/",n.a.createElement("sub",null,"A")))),n.a.createElement(h.a,{xs:6,sm:3},l&&n.a.createElement("h5",null,l.toFixed(3),n.a.createElement("small",{className:"noselect px-1"},"Alc"))),n.a.createElement(h.a,{xs:6,sm:3},r&&n.a.createElement("h5",null,r.toFixed(3),n.a.createElement("small",{className:"noselect px-1"},n.a.createElement("sup",null,"$"),"/",n.a.createElement("sub",null,"oz")))))),n.a.createElement(C.a,{key:a},n.a.createElement(h.a,{xs:6,sm:3},n.a.createElement("h5",null,c," ",o)),s)}},e.renderResults=function(){var a=e.state.stored.map((function(a){return n.a.createElement(n.a.Fragment,{key:a.id},n.a.createElement("tr",null,n.a.createElement("td",{className:"align-middle text-left"},n.a.createElement("div",{className:"mb-2"},a.name),n.a.createElement(x.a,null,n.a.createElement(g.a,{onClick:function(){return e.editBrew(a)},size:"sm"},n.a.createElement("i",{className:"fa fa-edit px-1"})),n.a.createElement(g.a,{color:"danger",onClick:function(){return e.removeBrewSize(a.id)},size:"sm"},n.a.createElement("i",{className:"fa fa-times px-1"})))),n.a.createElement("td",{className:"align-middle text-left"},n.a.createElement("div",null,a.price&&"$".concat(parseFloat(a.price).toFixed(2))),n.a.createElement("div",null,n.a.createElement("span",{className:"mr-1"},a.alcohol),n.a.createElement("small",null,a.alcohol_unit)),n.a.createElement("div",null,n.a.createElement("span",{className:"mr-1"},a.volume),n.a.createElement("small",null,a.volume_unit))),n.a.createElement("td",{className:"align-middle"},a.ppv_calculation&&a.ppv_calculation.toFixed(3)),n.a.createElement("td",{className:"align-middle"},a.apv_calculation&&a.apv_calculation.toFixed(3)),n.a.createElement("td",{className:"align-middle"},a.calculation&&a.calculation.toFixed(3))))}));return a.length>0&&n.a.createElement(z.a,{dark:!0,className:"my-5",size:"sm"},n.a.createElement("thead",null,n.a.createElement("tr",null,n.a.createElement("th",null),n.a.createElement("th",null),n.a.createElement("th",{className:"noselect text-nowrap"},n.a.createElement("sup",null,"$"),"/",n.a.createElement("sub",null,"oz")),n.a.createElement("th",{className:"noselect text-nowrap"},"Alc"),n.a.createElement("th",{className:"noselect text-nowrap"},n.a.createElement("sup",null,"$"),"/",n.a.createElement("sub",null,"A")),n.a.createElement("th",null))),n.a.createElement("tbody",null,a))},e}return Object(s.a)(t,[{key:"render",value:function(){var e=this.state.brew,a=e.name,t=e.alcohol,l=e.alcohol_unit,r=e.sizes;return n.a.createElement("div",{className:"home"},n.a.createElement(u.a,{title:"BeerMiser"},n.a.createElement("link",{rel:"manifest",href:"/manifest.json"})),n.a.createElement("h1",{className:"text-center"},"BeerMiser"),n.a.createElement(y.a,{className:"mt-4",autoComplete:"off"},n.a.createElement(E.a,{row:!0},n.a.createElement(h.a,{sm:12},n.a.createElement(v.a,null,n.a.createElement(b.a,{type:"text",name:"name",placeholder:"Name",value:a,onChange:this.handleChange})))),n.a.createElement(E.a,{row:!0},n.a.createElement(h.a,{sm:12},n.a.createElement(v.a,null,n.a.createElement(b.a,{type:"number",name:"alcohol",placeholder:"Alcohol",value:t,onChange:this.handleChange,min:0}),n.a.createElement(f.a,{addonType:"append"},n.a.createElement(b.a,{type:"select",name:"alcohol_unit",value:l,className:"rounded-right",style:{borderRadius:0},onChange:this.handleChange},n.a.createElement("option",null,"APV"),n.a.createElement("option",null,"ABW")))))),this.renderSizes(r),n.a.createElement(C.a,null,n.a.createElement(h.a,{sm:{size:6,offset:6}},n.a.createElement(g.a,{block:!0,onClick:this.addSize},"Add Size"))),n.a.createElement(C.a,null,n.a.createElement(h.a,null,n.a.createElement("div",{className:"text-center my-2"},this.renderCalculations(e)))),n.a.createElement(C.a,null,n.a.createElement(h.a,{sm:{size:6,offset:6}},n.a.createElement(g.a,{block:!0,color:"success",onClick:this.saveCurrent},"Save")))),n.a.createElement(C.a,null,n.a.createElement(h.a,null,n.a.createElement("div",{className:"text-center my-2"},this.renderResults()))),n.a.createElement("div",{className:"pt-5"},n.a.createElement(g.a,{block:!0,color:"danger",onClick:this.reset},"Reset")))}}]),t}(l.Component),D=function(e){Object(i.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(o.a)(this,t);for(var l=arguments.length,n=new Array(l),r=0;r<l;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))).state={isOpen:!1,disclaimerDismissed:!1,displayText:!1,displayImages:!1,devTools:!1,displayGatherer:!1},e.toggle=function(){e.setState({isOpen:!e.state.isOpen})},e}return Object(s.a)(t,[{key:"render",value:function(){return n.a.createElement(d.a,null,n.a.createElement(u.b,null,n.a.createElement(u.a,{titleTemplate:"%s - Jibbermaster"}),n.a.createElement("div",{className:"app text-light bg-dark col-md-8 offset-md-2 col-lg-8 offset-lg-2 col-xl-6 offset-xl-3"},n.a.createElement(p.c,null,n.a.createElement(p.a,{path:"/",exact:!0,render:function(e){return n.a.createElement(A,e)}})))))}}]),t}(l.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(n.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[37,1,2]]]);
//# sourceMappingURL=main.21fe6a91.chunk.js.map
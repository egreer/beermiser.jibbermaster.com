(this["webpackJsonpbeermiser.jibbermaster.com"]=this["webpackJsonpbeermiser.jibbermaster.com"]||[]).push([[0],{59:function(e,t,n){},62:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(16),r=n.n(s),i=(n(59),n(24)),l=n(26),o=n(27),d=n(34),j=n(32),u=n(22),b=n(51),h=n(9),m=(n(62),n(83)),x=n(78),O=n(50),p=n(79),v=n(77),f=n(84),g=n(80),w=n(81),C=n(8),y=n(42),N=n.n(y),S=n(21),z=n.n(S),k=n(53),_=n(82),B=n(1),A=function(e){var t=e.onConfirm,n=e.triggerText,a=e.triggerButtonParams,s=e.headerText,r=void 0===s?"Confirm?":s,l=e.bodyText,o=e.confirmText,d=void 0===o?"Save":o,j=e.confirmVariant,u=void 0===j?"primary":j,b=Object(c.useState)(!1),h=Object(k.a)(b,2),m=h[0],x=h[1],p=function(e){x(!1),e&&t()},f=Object(B.jsx)(_.a.Header,{children:Object(B.jsx)(_.a.Title,{children:r})}),g=Object(B.jsx)(_.a.Body,{children:l||"Confirm?"});return Object(B.jsxs)(B.Fragment,{children:[Object(B.jsxs)(_.a,{show:m,onHide:p,animation:!0,contentClassName:"bg-dark text-light noselect",children:[f,l&&g,Object(B.jsxs)(_.a.Footer,{children:[Object(B.jsx)(O.a,{children:Object(B.jsx)(v.a,{variant:"secondary",onClick:function(){return p(!1)},block:!0,children:"Close"})}),Object(B.jsx)(O.a,{children:Object(B.jsx)(v.a,{variant:u,onClick:function(){return p(!0)},block:!0,children:d})})]})]}),Object(B.jsx)(v.a,Object(i.a)(Object(i.a)({onClick:function(){return x(!0)}},a),{},{children:n}))]})},F={id:z()(),volume:"",volume_unit:"Oz",price:"",calculation:null,apv_calculation:null,ppv_calculation:null},T={id:z()(),name:"",alcohol:"",alcohol_unit:"APV",sizes:[Object(C.cloneDeep)(F)]},V={stored:[],brew:Object(C.cloneDeep)(T)},R=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(l.a)(this,n);for(var c=arguments.length,s=new Array(c),r=0;r<c;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state=Object(C.cloneDeep)(V),e.componentDidMount=function(){var t=N.a.get("beermiser-state")||Object(C.cloneDeep)(V);e.setState(t)},e.persistState=function(t,n){e.setState(t,(function(){N.a.set("beermiser-state",e.state),Object(C.isFunction)(n)&&n()}))},e.handleChange=function(t){var n=e.state.brew;e.persistState({brew:Object(C.set)(n,t.target.name,t.target.value)},e.updateCalculation)},e.handleVolumeChange=function(t,n){console.log(t,n);var c=e.state.brew;e.state.brew.sizes.map((function(e){return e.id===n&&Object(C.set)(e,t.target.name,t.target.value),e})),e.persistState(c,e.updateCalculation)},e.currentValid=function(){var t=e.state.brew,n=Object(C.some)(t.sizes,(function(e){return e.volume||e.price}));return t.name||t.alcohol||n},e.saveCurrent=function(){console.log("Save Current",e.state);var t=e.state,n=t.brew,c=t.stored;n.id=z()(),n.sizes.forEach((function(t){t.id=z()(),c.push(e.buildBrewSize(n,t))})),e.persistState(Object(C.assign)(Object(C.cloneDeep)(V),{stored:Object(C.orderBy)(c,["calculation","apv_calculation","ppv_calculation"],["asc","desc","asc"])}))},e.buildBrewSize=function(e,t){console.log("brew",e),console.log("size",t);var n=Object(C.assign)({},e,t);return console.log("brewSize",n),Object(C.assign)(n,{brewId:e.id,id:t.id,sizes:[]}),n},e.updateCalculation=function(){e.persistState({brew:e.calculateCalculations(e.state.brew)})},e.calculateCalculations=function(e){var t=e.alcohol,n=e.alcohol_unit;return e.sizes.forEach((function(e){var c=e.volume,a=e.volume_unit,s=e.price,r=parseFloat(t),i=parseFloat(c),l=null,o=null,d=null;t&&"ABW"===n&&(r=1.25*parseFloat(t)),c&&"mL"===a?i=.03381*parseFloat(c):c&&"L"===a&&(i=1e3*parseFloat(c)*.03381),r&&r>0&&i&&i>0&&(l=r/100*i),i&&i>0&&s&&parseFloat(s)>0&&(o=parseFloat(s)/i),r&&r>0&&i&&i>0&&s&&parseFloat(s)>0&&(d=parseFloat(s)/(r/100*i)),Object(C.assign)(e,{calculation:d,apv_calculation:l,ppv_calculation:o})})),e},e.reCalculateAll=function(){var t=e.state.stored;t.forEach((function(t){Object(C.assign)(t,e.calculateCalculations(t))})),e.persistState({stored:Object(C.orderBy)(t,["calculation","apv_calculation","ppv_calculation"],["asc","desc","asc"])})},e.removeActiveBrewSize=function(t){var n=e.state.brew;Object(C.remove)(n.sizes,(function(e){return e.id===t})),e.persistState({brew:n})},e.removeBrewSize=function(t){var n=e.state.stored;Object(C.remove)(n,(function(e){return e.id===t})),e.persistState({stored:n})},e.removeBrew=function(t){var n=e.state.stored;Object(C.remove)(n,(function(e){return e.brewId===t})),e.persistState({stored:n})},e.editBrew=function(t){e.currentValid()&&e.saveCurrent();var n=e.rebuildBrew(t.brewId);e.persistState({brew:n}),e.removeBrew(n.id)},e.rebuildBrew=function(t){var n=e.state.stored.filter((function(e){return e.brewId===t})),c={id:t,name:n[0].name,alcohol:n[0].alcohol,alcohol_unit:n[0].alcohol_unit,sizes:n};return n.forEach((function(e){delete e.name,delete e.alcohol,delete e.alcohol_unit})),c},e.addSize=function(){var t,n=e.state.brew,c=Object(C.cloneDeep)(F);c.id=z()(),c.volume_unit=(null===(t=Object(C.last)(n.sizes))||void 0===t?void 0:t.volume_unit)||c.volume_unit,n.sizes.push(c),e.persistState({brew:n})},e.reset=function(){e.persistState(Object(C.cloneDeep)(V))},e.renderSizes=function(t){return null===t||void 0===t?void 0:t.map((function(n,c){return Object(B.jsxs)(m.a.Group,{as:x.a,children:[Object(B.jsx)(O.a,{xs:{span:6},className:"mb-3 mb-sm-0",children:Object(B.jsxs)(p.a,{children:[Object(B.jsx)(m.a.Control,{type:"number",name:"volume",placeholder:"Volume",value:n.volume,onChange:function(t){return e.handleVolumeChange(t,n.id)},min:0}),Object(B.jsx)(p.a.Append,{children:Object(B.jsxs)(m.a.Control,{as:"select",name:"volume_unit",value:n.volume_unit,className:"rounded-right",style:{borderRadius:0},onChange:function(t){return e.handleVolumeChange(t,n.id)},children:[Object(B.jsx)("option",{children:"Oz"}),Object(B.jsx)("option",{children:"mL"}),Object(B.jsx)("option",{children:"L"})]})})]})}),Object(B.jsx)(O.a,{xs:{span:4},className:"mb-3 mb-sm-0 pr-1",children:Object(B.jsxs)(p.a,{children:[Object(B.jsx)(m.a.Control,{type:"number",name:"price",placeholder:"Price",value:n.price,onChange:function(t){return e.handleVolumeChange(t,n.id)},min:0,step:.01}),Object(B.jsx)(p.a.Append,{children:Object(B.jsx)(p.a.Text,{children:"$"})})]})}),Object(B.jsx)(O.a,{xs:{span:2},children:Object(B.jsx)(v.a,{variant:"danger",block:!0,disabled:t.length<=1,onClick:function(){return e.removeActiveBrewSize(n.id)},children:Object(B.jsx)("i",{className:"fa fa-trash"})})})]},c)}))},e.renderCalculations=function(t){return Object(B.jsx)(f.a,{variant:"success",className:"calculations",children:t.sizes.map((function(t,n){return e.renderCalculation(t,n)}))})},e.renderCalculation=function(e,t){if(e){var n=e.calculation,c=e.apv_calculation,a=e.ppv_calculation,s=e.volume,r=e.volume_unit,i=Object(B.jsx)(O.a,{xs:6,sm:9,style:{opacity:.3},children:Object(B.jsx)("h5",{children:"Calculating...."})});return(n||c||a)&&(i=Object(B.jsxs)(B.Fragment,{children:[Object(B.jsx)(O.a,{xs:6,sm:3,children:n&&Object(B.jsxs)("h5",{children:[n.toFixed(3),Object(B.jsxs)("small",{className:"noselect px-1 text-nowrap",children:[Object(B.jsx)("sup",{children:"$"}),"/",Object(B.jsx)("sub",{children:"A"})]})]})}),Object(B.jsx)(O.a,{xs:6,sm:3,children:c&&Object(B.jsxs)("h5",{children:[c.toFixed(3),Object(B.jsx)("small",{className:"noselect px-1",children:"Alc"})]})}),Object(B.jsx)(O.a,{xs:6,sm:3,children:a&&Object(B.jsxs)("h5",{children:[a.toFixed(3),Object(B.jsxs)("small",{className:"noselect px-1",children:[Object(B.jsx)("sup",{children:"$"}),"/",Object(B.jsx)("sub",{children:"oz"})]})]})})]})),Object(B.jsxs)(x.a,{children:[Object(B.jsx)(O.a,{xs:6,sm:3,children:Object(B.jsxs)("h5",{children:[s," ",r]})}),i]},t)}},e.renderResults=function(){var t=e.state.stored.map((function(t){return Object(B.jsx)(a.a.Fragment,{children:Object(B.jsxs)("tr",{children:[Object(B.jsxs)("td",{className:"align-middle text-left",children:[Object(B.jsx)("div",{className:"mb-2",children:t.name}),Object(B.jsxs)(g.a,{children:[Object(B.jsx)(v.a,{variant:"secondary",onClick:function(){return e.editBrew(t)},size:"sm",children:Object(B.jsx)("i",{className:"fa fa-edit px-1"})}),Object(B.jsx)(v.a,{variant:"danger",onClick:function(){return e.removeBrewSize(t.id)},size:"sm",children:Object(B.jsx)("i",{className:"fa fa-times px-1"})})]})]}),Object(B.jsxs)("td",{className:"align-middle text-left",children:[Object(B.jsx)("div",{children:t.price&&"$".concat(parseFloat(t.price).toFixed(2))}),Object(B.jsxs)("div",{children:[Object(B.jsx)("span",{className:"mr-1",children:t.alcohol}),Object(B.jsx)("small",{children:t.alcohol_unit})]}),Object(B.jsxs)("div",{children:[Object(B.jsx)("span",{className:"mr-1",children:t.volume}),Object(B.jsx)("small",{children:t.volume_unit})]})]}),Object(B.jsx)("td",{className:"align-middle",children:t.ppv_calculation&&t.ppv_calculation.toFixed(3)}),Object(B.jsx)("td",{className:"align-middle",children:t.apv_calculation&&t.apv_calculation.toFixed(3)}),Object(B.jsx)("td",{className:"align-middle",children:t.calculation&&t.calculation.toFixed(3)})]})},t.id)}));return t.length>0&&Object(B.jsxs)(w.a,{variant:"dark",className:"my-4",size:"sm",hover:!0,children:[Object(B.jsx)("thead",{children:Object(B.jsxs)("tr",{children:[Object(B.jsx)("th",{}),Object(B.jsx)("th",{}),Object(B.jsxs)("th",{className:"noselect text-nowrap",children:[Object(B.jsx)("sup",{children:"$"}),"/",Object(B.jsx)("sub",{children:"oz"})]}),Object(B.jsx)("th",{className:"noselect text-nowrap",children:"Alc"}),Object(B.jsxs)("th",{className:"noselect text-nowrap",children:[Object(B.jsx)("sup",{children:"$"}),"/",Object(B.jsx)("sub",{children:"A"})]})]})}),Object(B.jsx)("tbody",{children:t})]})},e}return Object(o.a)(n,[{key:"render",value:function(){var e=this.state.brew,t=e.name,n=e.alcohol,c=e.alcohol_unit,a=e.sizes;return Object(B.jsxs)("div",{className:"home",children:[Object(B.jsx)(u.a,{title:"BeerMiser",children:Object(B.jsx)("link",{rel:"manifest",href:"/manifest.json"})}),Object(B.jsx)("h1",{className:"text-center",children:"BeerMiser"}),Object(B.jsxs)(m.a,{className:"mt-4",autoComplete:"off",children:[Object(B.jsx)(m.a.Group,{as:x.a,children:Object(B.jsx)(O.a,{sm:12,children:Object(B.jsx)(p.a,{children:Object(B.jsx)(m.a.Control,{type:"text",name:"name",placeholder:"Name",value:t,onChange:this.handleChange})})})}),Object(B.jsx)(m.a.Group,{as:x.a,children:Object(B.jsx)(O.a,{sm:12,children:Object(B.jsxs)(p.a,{children:[Object(B.jsx)(m.a.Control,{type:"number",name:"alcohol",placeholder:"Alcohol",value:n,onChange:this.handleChange,min:0}),Object(B.jsx)(p.a.Append,{children:Object(B.jsxs)(m.a.Control,{as:"select",name:"alcohol_unit",value:c,className:"rounded-right",style:{borderRadius:0},onChange:this.handleChange,children:[Object(B.jsx)("option",{children:"APV"}),Object(B.jsx)("option",{children:"ABW"})]})})]})})}),this.renderSizes(a),Object(B.jsx)(x.a,{className:"my-4",children:Object(B.jsx)(O.a,{sm:{span:6,offset:6},children:Object(B.jsx)(v.a,{block:!0,variant:"secondary",onClick:this.addSize,children:"Add Size"})})}),Object(B.jsx)(x.a,{className:"my-4",children:Object(B.jsx)(O.a,{children:Object(B.jsx)("div",{className:"text-center my-2",children:this.renderCalculations(e)})})}),Object(B.jsx)(x.a,{className:"my-4",children:Object(B.jsx)(O.a,{sm:{span:6,offset:6},children:Object(B.jsx)(v.a,{block:!0,variant:"success",onClick:this.saveCurrent,disabled:!this.currentValid(),children:"Save"})})})]}),Object(B.jsx)(x.a,{children:Object(B.jsx)(O.a,{children:Object(B.jsx)("div",{className:"text-center",children:this.renderResults()})})}),Object(B.jsx)("div",{className:"pt-5",children:Object(B.jsx)(A,{onConfirm:this.reset,triggerText:"Reset",confirmText:"Reset",headerText:"Reset Brews?",confirmVariant:"danger",triggerButtonParams:{block:!0,variant:"danger"}})})]})}}]),n}(c.Component),W=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(){var e;Object(l.a)(this,n);for(var c=arguments.length,a=new Array(c),s=0;s<c;s++)a[s]=arguments[s];return(e=t.call.apply(t,[this].concat(a))).state={isOpen:!1,disclaimerDismissed:!1,displayText:!1,displayImages:!1,devTools:!1,displayGatherer:!1},e.toggle=function(){e.setState({isOpen:!e.state.isOpen})},e}return Object(o.a)(n,[{key:"render",value:function(){return Object(B.jsx)(b.a,{children:Object(B.jsxs)(u.b,{children:[Object(B.jsx)(u.a,{titleTemplate:"%s - Jibbermaster"}),Object(B.jsx)("div",{className:"app text-light bg-dark col-md-8 offset-md-2 col-lg-8 offset-lg-2 col-xl-6 offset-xl-3",children:Object(B.jsx)(h.c,{children:Object(B.jsx)(h.a,{path:"/",exact:!0,render:function(e){return Object(B.jsx)(R,Object(i.a)({},e))}})})})]})})}}]),n}(c.Component),D=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function E(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}r.a.render(Object(B.jsx)(W,{}),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");D?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var c=n.headers.get("content-type");404===n.status||null!=c&&-1===c.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):E(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):E(t,e)}))}}()}},[[75,1,2]]]);
//# sourceMappingURL=main.d2136dea.chunk.js.map
(this["webpackJsonpbeermiser.jibbermaster.com"]=this["webpackJsonpbeermiser.jibbermaster.com"]||[]).push([[0],{37:function(e,t,a){e.exports=a(68)},42:function(e,t,a){},45:function(e,t,a){},68:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(15),c=a.n(r),o=(a(42),a(16)),s=a(17),i=a(19),u=a(18),m=a(14),d=a(35),p=a(6),E=(a(45),a(70)),h=a(71),f=a(72),v=a(73),b=a(80),g=a(74),w=a(79),C=a(75),y=a(76),x=a(77),z=a(78),O=a(7),j=a(24),N=a.n(j),S=a(13),k=a.n(S),_={id:k()(),volume:"",volume_unit:"Oz",price:"",calculation:null,apv_calculation:null,ppv_calculation:null},A={id:k()(),name:"",alcohol:"",alcohol_unit:"APV",sizes:[Object(O.cloneDeep)(_)]},B={stored:[],brew:Object(O.cloneDeep)(A)},F=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state=Object(O.cloneDeep)(B),e.componentDidMount=function(){var t=N.a.get("beermiser-state")||Object(O.cloneDeep)(B);e.setState(t)},e.persistState=function(t,a){e.setState(t,(function(){N.a.set("beermiser-state",e.state),Object(O.isFunction)(a)&&a()}))},e.handleChange=function(t){var a=e.state.brew;e.persistState({brew:Object(O.set)(a,t.target.name,t.target.value)},e.updateCalculation)},e.handleVolumeChange=function(t,a){console.log(t,a);var n=e.state.brew;e.state.brew.sizes.map((function(e){return e.id===a&&Object(O.set)(e,t.target.name,t.target.value),e})),e.persistState(n,e.updateCalculation)},e.saveCurrent=function(){console.log("Save Current",e.state);var t=e.state,a=t.brew,n=t.stored;a.id=k()(),a.sizes.forEach((function(t){t.id=k()(),n.push(e.buildBrewSize(a,t))})),e.persistState(Object(O.assign)(Object(O.cloneDeep)(B),{stored:Object(O.orderBy)(n,["calculation","apv_calculation","ppv_calculation"],["asc","desc","asc"])}))},e.buildBrewSize=function(e,t){console.log("brew",e),console.log("size",t);var a=Object(O.assign)({},e,t);return console.log("brewSize",a),delete a.sizes,Object(O.assign)(a,{brewId:e.id,id:t.id}),a},e.updateCalculation=function(){e.persistState({brew:e.calculateCalculations(e.state.brew)})},e.calculateCalculations=function(e){var t=e.alcohol,a=e.alcohol_unit;return e.sizes.forEach((function(e){var n=e.volume,l=e.volume_unit,r=e.price,c=parseFloat(t),o=parseFloat(n),s=null,i=null,u=null;t&&"ABW"===a&&(c=1.25*parseFloat(t)),n&&"mL"===l?o=.03381*parseFloat(n):n&&"L"===l&&(o=1e3*parseFloat(n)*.03381),c&&c>0&&o&&o>0&&(s=c/100*o),o&&o>0&&r&&parseFloat(r)>0&&(i=parseFloat(r)/o),c&&c>0&&o&&o>0&&r&&parseFloat(r)>0&&(u=parseFloat(r)/(c/100*o)),Object(O.assign)(e,{calculation:u,apv_calculation:s,ppv_calculation:i})})),e},e.reCalculateAll=function(){var t=e.state.stored;t.forEach((function(t){Object(O.assign)(t,e.calculateCalculations(t))})),e.persistState({stored:Object(O.orderBy)(t,["calculation","apv_calculation","ppv_calculation"],["asc","desc","asc"])})},e.removeActiveBrewSize=function(t){var a=e.state.brew;Object(O.remove)(a.sizes,(function(e){return e.id===t})),e.persistState({brew:a})},e.removeBrewSize=function(t){var a=e.state.stored;Object(O.remove)(a,(function(e){return e.id===t})),e.persistState({stored:a})},e.removeBrew=function(t){var a=e.state.stored;Object(O.remove)(a,(function(e){return e.brewId===t})),e.persistState({stored:a})},e.editBrew=function(t){var a=e.rebuildBrew(t.brewId);e.persistState({brew:a}),e.removeBrew(a.id)},e.rebuildBrew=function(t){var a=e.state.stored.filter((function(e){return e.brewId===t})),n={id:t,name:a[0].name,alcohol:a[0].alcohol,alcohol_unit:a[0].alcohol_unit,sizes:a};return a.forEach((function(e){delete e.name,delete e.alcohol,delete e.alcohol_unit})),n},e.addSize=function(){var t=e.state.brew,a=Object(O.cloneDeep)(_);a.id=k()(),t.sizes.push(a),e.persistState({brew:t})},e.reset=function(){e.persistState(Object(O.cloneDeep)(B))},e.renderSizes=function(t){return null===t||void 0===t?void 0:t.map((function(a,n){return l.a.createElement(E.a,{row:!0,key:n},l.a.createElement(h.a,{xs:{size:6},className:"mb-3 mb-sm-0"},l.a.createElement(f.a,null,l.a.createElement(v.a,{type:"number",name:"volume",placeholder:"Volume",value:a.volume,onChange:function(t){return e.handleVolumeChange(t,a.id)},min:0}),l.a.createElement(b.a,{addonType:"append"},l.a.createElement(v.a,{type:"select",name:"volume_unit",value:a.volume_unit,className:"rounded-right",style:{borderRadius:0},onChange:function(t){return e.handleVolumeChange(t,a.id)}},l.a.createElement("option",null,"Oz"),l.a.createElement("option",null,"mL"),l.a.createElement("option",null,"L"))))),l.a.createElement(h.a,{xs:{size:4},className:"mb-3 mb-sm-0 pr-1"},l.a.createElement(f.a,null,l.a.createElement(v.a,{type:"number",name:"price",placeholder:"Price",value:a.price,onChange:function(t){return e.handleVolumeChange(t,a.id)},min:0,step:.01}),l.a.createElement(b.a,{addonType:"append"},"$"))),l.a.createElement(h.a,{xs:{size:2}},l.a.createElement(g.a,{color:"danger",block:!0,disabled:t.length<=1,onClick:function(){return e.removeActiveBrewSize(a.id)}},l.a.createElement("i",{className:"fa fa-trash"}))))}))},e.renderCalculations=function(t){return l.a.createElement(w.a,{color:"success",className:"calculations"},t.sizes.map((function(t,a){return e.renderCalculation(t,a)})))},e.renderCalculation=function(e,t){if(e){var a=e.calculation,n=e.apv_calculation,r=e.ppv_calculation,c=e.volume,o=e.volume_unit,s=l.a.createElement(h.a,{xs:6,sm:9,style:{opacity:.3}},l.a.createElement("h5",null,"Calculating...."));return(a||n||r)&&(s=l.a.createElement(l.a.Fragment,null,l.a.createElement(h.a,{xs:6,sm:3},a&&l.a.createElement("h5",null,a.toFixed(3),l.a.createElement("small",{className:"noselect px-1 text-nowrap"},l.a.createElement("sup",null,"$"),"/",l.a.createElement("sub",null,"A")))),l.a.createElement(h.a,{xs:6,sm:3},n&&l.a.createElement("h5",null,n.toFixed(3),l.a.createElement("small",{className:"noselect px-1"},"Alc"))),l.a.createElement(h.a,{xs:6,sm:3},r&&l.a.createElement("h5",null,r.toFixed(3),l.a.createElement("small",{className:"noselect px-1"},l.a.createElement("sup",null,"$"),"/",l.a.createElement("sub",null,"oz")))))),l.a.createElement(C.a,{key:t},l.a.createElement(h.a,{xs:6,sm:3},l.a.createElement("h5",null,c," ",o)),s)}},e.renderResults=function(){var t=e.state.stored.map((function(t){return l.a.createElement(l.a.Fragment,{key:t.id},l.a.createElement("tr",null,l.a.createElement("td",{className:"align-middle text-left"},l.a.createElement("div",{className:"mb-2"},t.name),l.a.createElement(y.a,null,l.a.createElement(g.a,{onClick:function(){return e.editBrew(t)},size:"sm"},l.a.createElement("i",{className:"fa fa-edit px-1"})),l.a.createElement(g.a,{color:"danger",onClick:function(){return e.removeBrewSize(t.id)},size:"sm"},l.a.createElement("i",{className:"fa fa-times px-1"})))),l.a.createElement("td",{className:"align-middle text-left"},l.a.createElement("div",null,t.price&&"$".concat(parseFloat(t.price).toFixed(2))),l.a.createElement("div",null,l.a.createElement("span",{className:"mr-1"},t.alcohol),l.a.createElement("small",null,t.alcohol_unit)),l.a.createElement("div",null,l.a.createElement("span",{className:"mr-1"},t.volume),l.a.createElement("small",null,t.volume_unit))),l.a.createElement("td",{className:"align-middle"},t.ppv_calculation&&t.ppv_calculation.toFixed(3)),l.a.createElement("td",{className:"align-middle"},t.apv_calculation&&t.apv_calculation.toFixed(3)),l.a.createElement("td",{className:"align-middle"},t.calculation&&t.calculation.toFixed(3))))}));return t.length>0&&l.a.createElement(x.a,{dark:!0,className:"my-5",size:"sm"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null),l.a.createElement("th",null),l.a.createElement("th",{className:"noselect text-nowrap"},l.a.createElement("sup",null,"$"),"/",l.a.createElement("sub",null,"oz")),l.a.createElement("th",{className:"noselect text-nowrap"},"Alc"),l.a.createElement("th",{className:"noselect text-nowrap"},l.a.createElement("sup",null,"$"),"/",l.a.createElement("sub",null,"A")),l.a.createElement("th",null))),l.a.createElement("tbody",null,t))},e}return Object(s.a)(a,[{key:"render",value:function(){var e=this.state.brew,t=e.name,a=e.alcohol,n=e.alcohol_unit,r=e.sizes;return l.a.createElement("div",{className:"home"},l.a.createElement(m.a,{title:"BeerMiser"},l.a.createElement("link",{rel:"manifest",href:"/manifest.json"})),l.a.createElement("h1",{className:"text-center"},"BeerMiser"),l.a.createElement(z.a,{className:"mt-4",autoComplete:"off"},l.a.createElement(E.a,{row:!0},l.a.createElement(h.a,{sm:12},l.a.createElement(f.a,null,l.a.createElement(v.a,{type:"text",name:"name",placeholder:"Name",value:t,onChange:this.handleChange})))),l.a.createElement(E.a,{row:!0},l.a.createElement(h.a,{sm:12},l.a.createElement(f.a,null,l.a.createElement(v.a,{type:"number",name:"alcohol",placeholder:"Alcohol",value:a,onChange:this.handleChange,min:0}),l.a.createElement(b.a,{addonType:"append"},l.a.createElement(v.a,{type:"select",name:"alcohol_unit",value:n,className:"rounded-right",style:{borderRadius:0},onChange:this.handleChange},l.a.createElement("option",null,"APV"),l.a.createElement("option",null,"ABW")))))),this.renderSizes(r),l.a.createElement(C.a,null,l.a.createElement(h.a,{sm:{size:6,offset:6}},l.a.createElement(g.a,{block:!0,onClick:this.addSize},"Add Size"))),l.a.createElement(C.a,null,l.a.createElement(h.a,null,l.a.createElement("div",{className:"text-center my-2"},this.renderCalculations(e)))),l.a.createElement(C.a,null,l.a.createElement(h.a,{sm:{size:6,offset:6}},l.a.createElement(g.a,{block:!0,color:"success",onClick:this.saveCurrent},"Save")))),l.a.createElement(C.a,null,l.a.createElement(h.a,null,l.a.createElement("div",{className:"text-center my-2"},this.renderResults()))),l.a.createElement("div",{className:"pt-5"},l.a.createElement(g.a,{block:!0,color:"danger",onClick:this.reset},"Reset")))}}]),a}(n.Component),W=function(e){Object(i.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,l=new Array(n),r=0;r<n;r++)l[r]=arguments[r];return(e=t.call.apply(t,[this].concat(l))).state={isOpen:!1,disclaimerDismissed:!1,displayText:!1,displayImages:!1,devTools:!1,displayGatherer:!1},e.toggle=function(){e.setState({isOpen:!e.state.isOpen})},e}return Object(s.a)(a,[{key:"render",value:function(){return l.a.createElement(d.a,null,l.a.createElement(m.b,null,l.a.createElement(m.a,{titleTemplate:"%s - Jibbermaster"}),l.a.createElement("div",{className:"app text-light bg-dark col-md-8 offset-md-2 col-lg-8 offset-lg-2 col-xl-6 offset-xl-3"},l.a.createElement(p.c,null,l.a.createElement(p.a,{path:"/",exact:!0,render:function(e){return l.a.createElement(F,e)}})))))}}]),a}(n.Component),D=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function R(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}c.a.render(l.a.createElement(W,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");D?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):R(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):R(t,e)}))}}()}},[[37,1,2]]]);
//# sourceMappingURL=main.289db8a1.chunk.js.map